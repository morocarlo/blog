{"componentChunkName":"component---src-templates-blog-post-js","path":"/add-google-analitycs-to-gatsbyjs/","result":{"data":{"site":{"siteMetadata":{"title":"Dev Tips"}},"markdownRemark":{"id":"3a13bedc-7489-5991-9e0a-cd97c2d7f150","excerpt":"Setting up Google Analitycs Google Analytics provides a way to collect this data and perform analytics on it answering the above questions among many others…","html":"<h2>Setting up Google Analitycs</h2>\n<p><b>Google Analytics</b> provides a way to collect this data and perform analytics on it answering the above questions among many others. The platform is free for 10 million hits per month per <b>Tracking ID</b>.</p>\n<p>The first step is to set up a <b>Google Analytics</b> account. You can do that <a href=\"https://analytics.google.com/\">here</a> by signing in with your Google Account.</p>\n<p>Follow the instructions and get the Tracking ID. It should be in the format <code class=\"language-text\">UA-XXXXXXXXX-X</code>.</p>\n<p>Google also has a <a href=\"https://support.google.com/analytics/answer/1008015?hl=en\">get started page</a> for reference.</p>\n<h2>Setting up the plugin</h2>\n<p>Install the <a href=\"https://www.gatsbyjs.org/docs/adding-analytics/\">Official plugin</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-plugin-google-analytics</code></pre></div>\n<p>Then open <code class=\"language-text\">gatsby-config.js</code> and edit inside the plugin the path gatsby-plugin-google-analytics resolver:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">module.exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins: <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve: <span class=\"token variable\"><span class=\"token variable\">`</span>gatsby-plugin-google-analytics<span class=\"token variable\">`</span></span>,\n      options: <span class=\"token punctuation\">{</span>\n        // replace <span class=\"token string\">\"UA-XXXXXXXXX-X\"</span> with your own Tracking ID\n        trackingId: <span class=\"token string\">\"UA-XXXXXXXXX-X\"</span>,\n      <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">]</span>,\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The plugin only work after the build. Run <code class=\"language-text\">gatsby build</code> and have a look on the compiled files, e.g. in the <code class=\"language-text\">index.html</code>.\nNear the footer you will have the tracking code:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">i<span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">,</span>o<span class=\"token punctuation\">,</span>g<span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">,</span>m</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">[</span><span class=\"token string\">'GoogleAnalyticsObject'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>r<span class=\"token punctuation\">;</span>i<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>i<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token operator\">||</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>q<span class=\"token operator\">=</span>i<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>q<span class=\"token operator\">||</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>l<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">*</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>a<span class=\"token operator\">=</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    m<span class=\"token operator\">=</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>a<span class=\"token punctuation\">.</span>async<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>a<span class=\"token punctuation\">.</span>src<span class=\"token operator\">=</span>g<span class=\"token punctuation\">;</span>m<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>m<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">,</span>document<span class=\"token punctuation\">,</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'https://www.google-analytics.com/analytics.js'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ga'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> ga <span class=\"token operator\">===</span> <span class=\"token string\">\"function\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">ga</span><span class=\"token punctuation\">(</span><span class=\"token string\">'create'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'UA-XXXXXXXXX-X'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'auto'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For european websites it’s important to add set the option anonymize to true for preventing IP registration. With this option you will be GDPR compliant</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">anonymize<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span></code></pre></div>","frontmatter":{"title":"Add Google Analitycs to Gatsby js","date":"January 04, 2020","description":null,"tags":["gatsby","google-analitycs"]}}},"pageContext":{"slug":"/add-google-analitycs-to-gatsbyjs/","previous":null,"next":null}}}